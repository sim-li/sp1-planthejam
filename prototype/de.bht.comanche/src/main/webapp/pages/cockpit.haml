%ptj-menu

.container
  / %div#temporary-debug-output selectedInvite: '{{ selectedInvite }}'
  .panel.panel-default
    .panel-body
      .col-md-4
        .tabbable
          %ul.nav.nav-tabs
            %li.active
              %a{"data-toggle" => "tab", :href => "#surveyTab", "ng-click" => "showSurveyDetails = true; showInviteDetails = false", "onclick" => "return false;"}
                Survey
                %span.badge {{surveys.length}}
            %li
              %a{"data-toggle" => "tab", "href" => "#inviteTab", "ng-click" => "showSurveyDetails = false; showInviteDetails = true;", "onclick" => "return false;"}
                Invite
                %span.badge {{(invites | filter: {ignored: "!YES"}).length}}
            %li
              %a{"data-toggle" => "tab", :href => "#ignoredInviteTab", "onclick" => "return false;"}
                Ignored
                %span.badge {{(invites | filter: {ignored: "YES"}).length}}
          .tab-content

            / #surveyTab.tab-pane.active
            #surveyTab.tab-pane
              SURV Hallo
              %input#filter.form-control{"ng-change" => "updateSelection()", "ng-model" => "searchSurvey", :placeholder => "Filter surveys ...", :type => "search"}
              #surveyList.list-group
              %a.list-group-item{"ng-click" => "selectSurvey(survey)", :href => "", "ng-repeat" => "survey in surveys | filter: searchSurvey"} {{survey.name}}

            / #inviteTab.tab-pane
            #inviteTab.tab-pane.active
              INV Hallo
              %input#filter.form-control{"ng-change" => "updateSelection()", "ng-model" => "searchInvite", :placeholder => "Filter invites ...", :type => "search"}
              #surveyList.list-group
              %a.list-group-item{"ng-click" => "selectInvite(invite);", :href => "", "ng-repeat" => "invite in invites | filter: {ignored: '!YES', name: searchInvite} "}
                .col-sm-8 {{invite.survey.name}} {{invite.ignored}}
                .btn-group
                  %label.btn.btn-primary.btn-sm{"btn-radio" => "'accept'", "ng-model" => "radioModel", "ng-click" => "setSelectedInviteStatus('UNDECIDED')","onclick" => "return false;"}
                    %span.glyphicon.glyphicon-question-sign
                  %label.btn.btn-primary.btn-sm{"btn-radio" => "'accept'", "data-target" => "#calendarModal", "data-toggle" => "modal","ng-model" => "radioModel", "ng-click" => "setSelectedInviteStatus('NO')"}
                    %span.glyphicon.glyphicon-ok
                  #calendarModal.modal.fade.bs-example-modal-lg{"aria-hidden" => "true", "data-target" =>".bs-example-modal-lg", :role => "dialog", :tabindex => "-1"}
                    .modal-dialog.modal-lg
                      .modal-content
                        .modal-header
                          %button.close{"aria-label" => "Close", "data-dismiss" => "modal", :type => "button"}
                            %span{"aria-hidden" => "true"} Ã—
                          %h4.modal-title Please choose your Avaibilities
                        .modal-body
                          %ptj-calendar{"possible" => "possibleTimePeriods", "resulting" => "resultingTimePeriods"}
                        .modal-footer
                          %button.btn.btn-default{"data-dismiss" => "modal", :type => "button"} Close
                          %button.btn.btn-primary{:type => "button", "ng-click" => "saveAvailabilities()"} Save changes
                  %label.btn.btn-primary.btn-sm{"btn-radio" => "'ignore'", "ng-model" => "radioModel", "ng-click" => "setSelectedInviteStatus('YES')", "onclick" => "return false;"}
                    %span.glyphicon.glyphicon-remove

            #ignoredInviteTab.tab-pane
              IGNORE Hallo
              %input#filter.form-control{"ng-change" => "updateSelection()", "ng-model" => "searchIgnored", :placeholder => "Filter ignored invites ...", :type => "search"}
              #surveyList.list-group
              %a.list-group-item{"ng-click" => "selectInvite(invite);", :href => "", "ng-repeat" => "invite in invites | filter: {ignored : 'YES', name: searchIgnored} "}
                .col-sm-9 {{invite.survey.name}} {{invite.ignored}}
                %label.btn.btn-primary.btn-sm{"btn-radio" => "'reaccept'", "ng-model" => "radioModel", "ng-click" => "setSelectedInviteStatus('NO')", "onclick" => "return false;"}
                  reaccept
        / %div DEBUG selected: {{ selectedInvite }}

      #surveyDetails.col-md-8{"ng-show" => "showSurveyDetails"}
        Survey Details
        %input#addSurvey.btn.btn-primary{"ng-click" => "addSurvey()", :type => "button", :value => "Create a survey"}
        %input#editSurvey.btn.btn-primary{"ng-click" => "editSurvey()", :type => "button", :value => "Show and edit selected survey"}
        %input#deleteSurvey.btn.btn-primary{"ng-click" => "deleteSelectedSurvey()", :type => "button", :value => "Delete selected survey"}
        .panel.panel-default
          .panel-body
            %h2.text-warning{} {{ selectedSurvey.name }}
            %div{} {{ selectedSurvey.description }}
            %div Deadline : {{selectedSurvey.deadline | date:'yyyy-MM-dd HH:mm'}}
            %label{:for => "selectedSurveyDescription"} algo check:
            %div#selectedSurveyStatus{} wird {{ selectedInvite.algoCheck ? "ermittelt" : "nicht ermittelt" }}

      #inviteDetails.col-md-8{"ng-show" => "showInviteDetails"}
        Invite Details
        %input#addSurvey.btn.btn-primary{"ng-click" => "addSurvey()", :type => "button", :value => "Create a survey"}
        %input#editSurvey.btn.btn-primary{"ng-click" => "editSurvey()", :type => "button", :value => "Show and edit selected survey"}
        %input#deleteSurvey.btn.btn-primary{"ng-click" => "deleteSelectedSurvey()", :type => "button", :value => "Delete selected survey"}
        .panel.panel-default
          .panel-body
            %label{:for => "selectedSurveyDescription"} Description:
            %div#selectedSurveyDescription{} {{ selectedInvite.survey.description }}
            %div Deadline : {{selectedInvite.survey.deadline | date:'yyyy-MM-dd HH:mm'}}
            %label{:for => "selectedSurveyDescription"} Status:
            %div#selectedSurveyStatus{} wird {{ selectedInvite.ignored ? "ignoriert" : "akzeptiert" }}


            / %label{:for => "selectedSurveyDescription"} Deadline:
            / %div#selectedSurveyDescription{} {{ selectedInvite.survey.deadline }}
  / %button.btn.btn-primary{"data-target" => "#calendarModal", "data-toggle" => "modal", :type => "button"}
  /   demo calendar modal
  / #calendarModal.modal.fade.bs-example-modal-lg{"aria-hidden" => "true", "data-target" =>".bs-example-modal-lg", :role => "dialog", :tabindex => "-1"}
  /   .modal-dialog.modal-lg
  /     .modal-content
  /       .modal-header
  /         %button.close{"aria-label" => "Close", "data-dismiss" => "modal", :type => "button"}
  /           %span{"aria-hidden" => "true"} Ã—
  /         %h4.modal-title Please choose your Avaibilities
  /       .modal-body
  /         .calendar{"ng-model" => "eventSources", "ui-calendar" => "uiConfig.calendar"}
  /       .modal-footer
  /         %button.btn.btn-default{"data-dismiss" => "modal", :type => "button"} Close

  %ul{"ng-model" => "messages"}
    %li{"ng-repeat" => "message in messages"} {{ message }}
