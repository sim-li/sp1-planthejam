%ptj-menu

.container
  / %div#temporary-debug-output selectedInvite: '{{ selectedInvite }}'
  .panel.panel-default
    .panel-body
      .col-md-4
        .tabbable
          %ul.nav.nav-tabs
            %li.active
              %a{"data-toggle" => "tab", :href => "#surveyTab", "onclick" => "return false;"}
                Survey
                %span.badge {{invites.length}}
            %li
              %a{"data-toggle" => "tab", :href => "#inviteTab", "onclick" => "return false;"}
                Invite
                %span.badge {{invites.length}}
          .tab-content
            #surveyTab.tab-pane.active
              %input#filter.form-control{"ng-change" => "updateSelection()", "ng-model" => "searchString", :placeholder => "Terminumfragen durchsuchen ...", :type => "search"}
              #surveyList.list-group
              %a.list-group-item{"ng-click" => "selectInvite(invite);", :href => "", "ng-repeat" => "invite in invites | filter:searchString"}{{invite.survey.name}}
            #inviteTab.tab-pane
              %input#filter.form-control{"ng-change" => "updateSelection()", "ng-model" => "searchString", :placeholder => "Terminumfragen durchsuchen ...", :type => "search"}
              #surveyList.list-group
              %a.list-group-item{"ng-click" => "selectInvite(invite);", :href => "", "ng-repeat" => "invite in invites | filter:searchString"}
                .col-sm-7 {{invite.survey.name}}
                .btn-group
                  %label.btn.btn-primary.btn-sm{"btn-radio" => "'accept'", "ng-model" => "radioModel", "ng-click" => "setSelectedInviteIgnored(false)"} accept
                  %label.btn.btn-primary.btn-sm{"btn-radio" => "'ignore'", "ng-model" => "radioModel", "ng-click" => "setSelectedInviteIgnored(true)"} ignore
                / %button.btn.btn-success.btn-sm.col-sm-offset-1{"ng-click" => "setSelectedInviteIgnored(false)"} accept
                / %button.btn.btn-danger.btn-sm{"ng-click" => "setSelectedInviteIgnored(true)"} ignore
                / %button.btn.btn-success.btn-sm.col-sm-offset-4{"ng-click" => "invite.setIgnored(false)"} accept
                / %button.btn.btn-danger.btn-sm{"ng-click" => "invite.setIgnored(true)"} ignore
        / %div DEBUG selected: {{ selectedInvite }}
      .col-md-8
        / %input#filter.form-control{"ng-change" => "updateSelection()", "ng-model" => "searchString", :placeholder => "Terminumfragen durchsuchen ...", :type => "search"}
        / %input#filter.form-control{"ng-change" => "updateSelection()", "ng-keyup" => "$log.log('searchString: \\'' + user.searchString + '\\'')", "ng-model" => "user.searchString", :placeholder => "Terminumfragen durchsuchen ...", :type => "search"}
        %input#addSurvey.btn.btn-primary{"ng-click" => "addInvite()", :type => "button", :value => "Create a survey"}
        %input#editSurvey.btn.btn-primary{"ng-click" => "editInvite()", :type => "button", :value => "Show and edit selected survey"}
        %input#deleteSurvey.btn.btn-primary{"ng-click" => "deleteSelectedInvite()", :type => "button", :value => "Delete selected survey"}
        #surveyPreview.panel.panel-default
          .panel-body
            %label{:for => "selectedSurveyDescription"} Description:
            %div#selectedSurveyDescription{} {{ selectedInvite.survey.description }}
            %label{:for => "selectedSurveyDescription"} Status:
            %div#selectedSurveyStatus{} wird {{ selectedInvite.ignored ? "ignoriert" : "akzeptiert" }}
            / %label{:for => "selectedSurveyDescription"} Deadline:
            / %div#selectedSurveyDescription{} {{ selectedInvite.survey.deadline }}