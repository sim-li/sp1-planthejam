/ * Modal content template
%script{:id => "groupsModalContent.html", :type => "text/ng-template"}
  .modal-header
    %h3.modal-title
      %span.glyphicon.glyphicon-user
      Edit groups
      .pull-right
        %b {{selectedGroup.name}}
        %img{"ng-src" => "{{selectedGroup.iconurl}}&s=40", "style" => "padding-right:2px;"}
  .modal-body
    .row
      .col-md-6
        .btn-group
          %button.btn.btn-default{:type => "button", "ng-click" => ""}
            %span.glyphicon.glyphicon-plus
            Add
          %button.btn.btn-default{:type => "button", "ng-click" => ""}
            %span.glyphicon.glyphicon-pencil
            Rename
          %button.btn.btn-default{:type => "button", "ng-click" => ""}
            %span.glyphicon.glyphicon-resize-small
            Merge
          %button.btn.btn-default{:type => "button", "ng-click" => ""}
            %span.glyphicon.glyphicon-remove
            Remove
    %br
    .row
      .col-md-3
        .row
          .list-group
            %a.list-group-item{"ng-repeat" => "group in groups", "ng-click" => "selectGroup(group)"}
              .media-left
                %img{"ng-src" => "{{group.iconurl}}&s=40"}
              .media-body
                %h5 {{group.name}}
      .col-md-6
        .row
          Moma
          / Search Users must go here
  .modal-footer
    %button.btn.btn-primary{"ng-click" => "ok()"} OK
    %button.btn.btn-warning{"ng-click" => "cancel()"} Cancel

/ * Search field template
/ match.model binds to Type Ahead's model (curr. userSelected <- user in users)
%script{:id => "itemTpl.html", :type => "text/ng-template"}
  %a{:tabindex => "-1"}
    %i{"ng-class" => "'icon-'+match.model.type"}
    %span{"ng-bind-html-unsafe" => "match.model.title | typeaheadHighlight:query"}
      %img.pull-left{"ng-src" => "{{match.model.iconurl}}&s=20", "style" => "padding-right:2px;"}
      %b {{match.model.name}}
.input-group
  .input-group-addon
    %b To:
  / * Type ahead Search Field
  %input.form-control{"ng-model" => "userSelected", :placeholder => "+ Add user or group",                        |
   :type => "text", :typeahead => "user as user.name for user in users | filter: {name:$viewValue} | limitTo: 5", |
   "typeahead-template-url" => "itemTpl.html"}
  / CAUTION: Changed controller for one button event, rest of file uses invite controller
  .input-group-btn
    %button.btn.btn-default{"aria-label" => "Left Align", :type => "button", "ng-click" => "open('lg')"}
      %span.glyphicon.glyphicon-user{"aria-hidden" => "true"}
      Edit groups
  .input-group-btn
    %button.btn.btn-default{"ng-click" => "switchDetailPanel()", :type => "button"}
      %span.glyphicon.glyphicon-resize-vertical
/ * User pills section
%div{:collapse => "isCollapsed"}
  .well.well-sm
    .container-fluid
      .btn-group{"ng-repeat" => "user in addedUsers"}
        %label.btn.btn-default{:type => "button", "popover" => "e-mail: {{user.email}}\ntel: {{user.tel}}",         |
        "popover-title" => "{{user.name}}"}
          %img.pull-left{"ng-src" => "{{user.iconurl}}&s=20", "style" => "padding-right:2px;"}
          %b {{user.name}}
        %button.btn.btn-default{:type => "button", "ng-click" => "removeMember($index)"}
          %b
          %span.glyphicon.glyphicon-remove
